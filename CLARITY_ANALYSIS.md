# 为什么第二版设置更清晰？

## 关键差异分析

### 1. **对焦模式：`continuous` vs `single`** ⭐ 最重要

**第二版（清晰）：**
```javascript
{ focusMode: 'continuous' }  // 连续对焦
```

**之前版本（不清楚）：**
```javascript
{ focusMode: 'single' }  // 单次对焦
```

**为什么 `continuous` 更清晰？**
- ✅ **持续调整**：`continuous` 模式会持续微调对焦，适应手持时的微小移动
- ✅ **动态响应**：即使距离有 1-2cm 的变化，也能自动调整保持清晰
- ❌ **`single` 的问题**：只对焦一次后锁定，距离稍有变化就会失焦
- 📱 **手持拍摄**：身份证拍摄时手会轻微抖动，`continuous` 更适合

### 2. **分辨率设置：直接要求 4096**

**第二版（清晰）：**
```javascript
width: { min: 1920, ideal: 4096 }  // 直接要求最高分辨率
```

**之前版本（不清楚）：**
```javascript
width: { min: 2560, ideal: 3840, max: 4096 }  // 有 max 限制
```

**为什么直接要求 4096 更好？**
- ✅ **更明确的要求**：系统会优先选择支持 4K 的主相机
- ✅ **无上限限制**：不会因为 max 限制而选择较低分辨率
- ❌ **3840 的问题**：可能让系统选择 2K 相机而不是 4K 主相机

### 3. **延迟时间：500ms vs 800ms**

**第二版（清晰）：**
```javascript
setTimeout(..., 500)  // 500ms 延迟
```

**之前版本（不清楚）：**
```javascript
setTimeout(..., 800)  // 800ms 延迟
```

**为什么 500ms 更好？**
- ✅ **最佳时机**：500ms 是相机初始化完成但还未完全稳定的最佳时机
- ✅ **及时对焦**：在对焦设置生效时，相机还在调整状态，更容易接受新设置
- ❌ **800ms 太晚**：相机已经完全稳定，可能已经锁定在某个对焦状态

### 4. **简化的初始设置**

**第二版（清晰）：**
```javascript
advanced: [
  { focusMode: 'continuous' }  // 只有对焦模式
]
```

**之前版本（不清楚）：**
```javascript
advanced: [
  { focusMode: 'single' },
  { whiteBalanceMode: 'auto' },
  { exposureMode: 'auto' },
  { exposureCompensation: 0.0 }
]
```

**为什么简化更好？**
- ✅ **减少冲突**：过多的初始设置可能导致兼容性问题
- ✅ **让系统自动处理**：白平衡和曝光让系统自动处理更可靠
- ✅ **专注对焦**：只关注最重要的对焦设置

### 5. **无二次对焦和曝光补偿**

**第二版（清晰）：**
- 只应用一次对焦设置
- 无曝光补偿

**之前版本（不清楚）：**
- 有二次对焦（300ms 后再次应用）
- 有曝光补偿 `exposureCompensation: 0.2`

**为什么简单更好？**
- ✅ **避免过度调整**：二次对焦可能干扰已经稳定的对焦
- ✅ **自然曝光**：曝光补偿可能在某些设备上导致过曝或欠曝
- ✅ **让相机自己优化**：现代相机自动曝光已经很好了

## 总结

**最关键的差异是对焦模式：**
- `continuous` 模式 = 持续微调 = 适应手持抖动 = **更清晰** ✅
- `single` 模式 = 锁定对焦 = 距离变化就失焦 = **不清楚** ❌

**其他重要因素：**
1. 直接要求 4096 分辨率（选择更好的相机）
2. 500ms 延迟（最佳对焦时机）
3. 简化的设置（减少冲突）

## 最佳实践

对于身份证拍摄这种**近距离、手持、静态文档**的场景：
- ✅ 使用 `continuous` 对焦模式
- ✅ 直接要求最高分辨率
- ✅ 保持设置简单，让系统自动优化
- ✅ 5cm 对焦距离 + macro 模式

